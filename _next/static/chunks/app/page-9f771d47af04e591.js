(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2751:(e,a,t)=>{Promise.resolve().then(t.bind(t,4829))},4829:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>aS});var r=t(5155),n=t(2115),i=t(2177),s=t(221),o=t(5594),l=t(9708),d=t(2085),c=t(9434);let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,a)=>{let{className:t,variant:n,size:i,asChild:s=!1,...o}=e,d=s?l.DX:"button";return(0,r.jsx)(d,{className:(0,c.cn)(m({variant:n,size:i,className:t})),ref:a,...o})});u.displayName="Button";let p=n.forwardRef((e,a)=>{let{className:t,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});p.displayName="Input";var h=t(1992),j=t(9556),f=t(7381),x=t(518);let v=h.bL;h.YJ;let N=h.WT,b=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(h.l9,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[n,(0,r.jsx)(h.In,{asChild:!0,children:(0,r.jsx)(j.A,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=h.l9.displayName;let g=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(h.PP,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(f.A,{className:"h-4 w-4"})})});g.displayName=h.PP.displayName;let y=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(h.wn,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,r.jsx)(j.A,{className:"h-4 w-4"})})});y.displayName=h.wn.displayName;let A=n.forwardRef((e,a)=>{let{className:t,children:n,position:i="popper",...s}=e;return(0,r.jsx)(h.ZL,{children:(0,r.jsxs)(h.UC,{ref:a,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...s,children:[(0,r.jsx)(g,{}),(0,r.jsx)(h.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(y,{})]})})});A.displayName=h.UC.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(h.JU,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=h.JU.displayName;let k=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(h.q7,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(h.VF,{children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})}),(0,r.jsx)(h.p4,{children:n})]})});k.displayName=h.q7.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(h.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=h.wv.displayName;var R=t(968);let w=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(R.b,{ref:a,className:(0,c.cn)(w(),t),...n})});I.displayName=R.b.displayName;let S=i.Op,M=n.createContext({}),E=e=>{let{...a}=e;return(0,r.jsx)(M.Provider,{value:{name:a.name},children:(0,r.jsx)(i.xI,{...a})})},D=()=>{let e=n.useContext(M),a=n.useContext(P),{getFieldState:t,formState:r}=(0,i.xW)(),s=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=a;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...s}},P=n.createContext({}),T=n.forwardRef((e,a)=>{let{className:t,...i}=e,s=n.useId();return(0,r.jsx)(P.Provider,{value:{id:s},children:(0,r.jsx)("div",{ref:a,className:(0,c.cn)("space-y-2",t),...i})})});T.displayName="FormItem";let O=n.forwardRef((e,a)=>{let{className:t,...n}=e,{error:i,formItemId:s}=D();return(0,r.jsx)(I,{ref:a,className:(0,c.cn)(i&&"text-destructive",t),htmlFor:s,...n})});O.displayName="FormLabel";let _=n.forwardRef((e,a)=>{let{...t}=e,{error:n,formItemId:i,formDescriptionId:s,formMessageId:o}=D();return(0,r.jsx)(l.DX,{ref:a,id:i,"aria-describedby":n?"".concat(s," ").concat(o):"".concat(s),"aria-invalid":!!n,...t})});_.displayName="FormControl";let F=n.forwardRef((e,a)=>{let{className:t,...n}=e,{formDescriptionId:i}=D();return(0,r.jsx)("p",{ref:a,id:i,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});F.displayName="FormDescription";let C=n.forwardRef((e,a)=>{var t;let{className:n,children:i,...s}=e,{error:o,formMessageId:l}=D(),d=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):i;return d?(0,r.jsx)("p",{ref:a,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",n),...s,children:d}):null});C.displayName="FormMessage";let z=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});z.displayName="Card";let H=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",t),...n})});H.displayName="CardHeader";let G=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});G.displayName="CardTitle";let L=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});L.displayName="CardDescription";let U=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("p-6 pt-0",t),...n})});U.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,c.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter";var q=t(7655);let V=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(q.bL,{ref:a,className:(0,c.cn)("relative overflow-hidden",t),...i,children:[(0,r.jsx)(q.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,r.jsx)(B,{}),(0,r.jsx)(q.OK,{})]})});V.displayName=q.bL.displayName;let B=n.forwardRef((e,a)=>{let{className:t,orientation:n="vertical",...i}=e;return(0,r.jsx)(q.VM,{ref:a,orientation:n,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,r.jsx)(q.lr,{className:"relative flex-1 rounded-full bg-border"})})});B.displayName=q.VM.displayName;var J=t(4884);let Y=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(J.bL,{className:(0,c.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:a,children:(0,r.jsx)(J.zi,{className:(0,c.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});Y.displayName=J.bL.displayName;var Z=t(9613);let K=Z.Kq,X=Z.bL,W=Z.l9,$=n.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...i}=e;return(0,r.jsx)(Z.UC,{ref:a,sideOffset:n,className:(0,c.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});$.displayName=Z.UC.displayName;var Q=t(8098),ee=t(8510),ea=t(3798),et=t(1474),er=t(1721),en=t(7270),ei=t(8376),es=t(3095),eo=t(4371),el=t(1429),ed=t(4301),ec=t(7223),em=t(286),eu=t(5452),ep=t(5318);let eh=eu.bL;eu.l9;let ej=eu.ZL,ef=eu.bm,ex=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(eu.hJ,{ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});ex.displayName=eu.hJ.displayName;let ev=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(ej,{children:[(0,r.jsx)(ex,{}),(0,r.jsxs)(eu.UC,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[n,(0,r.jsxs)(eu.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(ep.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ev.displayName=eu.UC.displayName;let eN=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};eN.displayName="DialogHeader";let eb=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eb.displayName="DialogFooter";let eg=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(eu.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});eg.displayName=eu.hE.displayName;let ey=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(eu.VY,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});ey.displayName=eu.VY.displayName;let eA=o.Ik({name:o.Yj().min(1,{message:"Ime nasljednika je obavezno."}),relationship:o.eu("CHILD").default("CHILD"),isAlive:o.zM().default(!0),acceptsInheritance:o.zM().default(!0)}).refine(e=>e.isAlive||!e.acceptsInheritance,{message:"Preminuli nasljednik ne može prihvatiti nasljedstvo.",path:["acceptsInheritance"]});function ek(e){let{isOpen:a,onClose:t,onAddDescendant:o,parentName:l}=e,d=(0,i.mN)({resolver:(0,s.u)(eA),defaultValues:{name:"",relationship:"CHILD",isAlive:!0,acceptsInheritance:!0}}),c=d.watch("isAlive");return(0,n.useEffect)(()=>{c||d.setValue("acceptsInheritance",!1)},[c,d]),(0,n.useEffect)(()=>{a||d.reset()},[a,d]),(0,r.jsx)(eh,{open:a,onOpenChange:e=>!e&&t(),children:(0,r.jsxs)(ev,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(eN,{children:[(0,r.jsxs)(eg,{children:["Dodaj Nasljednika za ",l]}),(0,r.jsxs)(ey,{children:["Unesite podatke o djetetu preminulog nasljednika (",l,"). Oni će naslijediti njegov dio."]})]}),(0,r.jsx)(S,{...d,children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(function(e){o({name:e.name,relationship:e.relationship,isAlive:e.isAlive,acceptsInheritance:!!e.isAlive&&e.acceptsInheritance}),d.reset()}),className:"space-y-4 py-4",children:[(0,r.jsx)(E,{control:d.control,name:"name",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(O,{children:"Ime Nasljednika (Potomka)"}),(0,r.jsx)(_,{children:(0,r.jsx)(p,{placeholder:"Npr. Petar Petrović",...a,"aria-required":"true"})}),(0,r.jsx)(C,{})]})}}),(0,r.jsx)(E,{control:d.control,name:"isAlive",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-secondary/90",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(O,{children:"Da li je živ?"}),(0,r.jsx)(F,{children:"Status potomka."})]}),(0,r.jsx)(_,{children:(0,r.jsx)(Y,{checked:a.value,onCheckedChange:a.onChange,"aria-label":"Da li je potomak živ"})})]})}}),(0,r.jsx)(E,{control:d.control,name:"acceptsInheritance",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-secondary/90",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(O,{children:"Da li se prihvata nasljedstva?"}),(0,r.jsx)(F,{children:"Da li potomak prihvata dio nasljedstva."})]}),(0,r.jsx)(_,{children:(0,r.jsx)(Y,{checked:a.value,onCheckedChange:a.onChange,disabled:!c,"aria-label":"Da li se potomak prihvata nasljedstva"})})]})}}),(0,r.jsxs)(eb,{children:[(0,r.jsx)(ef,{asChild:!0,children:(0,r.jsx)(u,{type:"button",variant:"ghost",children:"Odustani"})}),(0,r.jsx)(u,{type:"submit",children:"Sačuvaj Potomka"})]})]})})]})})}let eR=e=>{let a=[];return e.forEach(e=>{a.push(e),e.descendants&&(a=a.concat(eR(e.descendants)))}),a},ew=(e,a)=>e.filter(e=>e.id!==a).map(e=>e.descendants&&e.descendants.length>0?{...e,descendants:ew(e.descendants,a)}:e),eI=(e,a,t)=>e.map(e=>{if(e.id===a){let a={...t,acceptsInheritance:!!t.isAlive&&t.acceptsInheritance,descendants:t.descendants||[]};return{...e,descendants:[...e.descendants||[],a]}}return e.descendants&&e.descendants.length>0?{...e,descendants:eI(e.descendants,a,t)}:e}),eS=o.Ik({name:o.Yj().min(1,{message:"Ime nasljednika je obavezno."}),relationship:o.k5(["SPOUSE","CHILD","PARENT","PATERNAL_GRANDFATHER","PATERNAL_GRANDMOTHER","MATERNAL_GRANDFATHER","MATERNAL_GRANDMOTHER","PGF_F","PGF_M","PGM_F","PGM_M","MGF_F","MGF_M","MGM_F","MGM_M"],{required_error:"Odnos prema ostaviocu je obavezan."}),isAlive:o.zM().default(!0),acceptsInheritance:o.zM().default(!0),requestSeparateHalf:o.zM().optional().default(!1)}).refine(e=>e.isAlive||!e.acceptsInheritance,{message:"Preminuli nasljednik ne može prihvatiti nasljedstvo.",path:["acceptsInheritance"]}).refine(e=>"SPOUSE"!==e.relationship||!e.requestSeparateHalf||e.isAlive&&e.acceptsInheritance,{message:"Supružnik može tražiti izdvajanje polovine samo ako je živ i prihvata nasljedstvo.",path:["requestSeparateHalf"]}),eM={SPOUSE:"Supružnik",CHILD:"Dijete",PARENT:"Roditelj",PATERNAL_GRANDFATHER:"Djed (očeva strana)",PATERNAL_GRANDMOTHER:"Baba (očeva strana)",MATERNAL_GRANDFATHER:"Djed (majcina strana)",MATERNAL_GRANDMOTHER:"Baba (majcina strana)",PGF_F:"Pradjed (otac očevog oca)",PGF_M:"Prababa (majka očevog oca)",PGM_F:"Pradjed (otac očeve majke)",PGM_M:"Prababa (majka očeve majke)",MGF_F:"Pradjed (otac majčinog oca)",MGF_M:"Prababa (majka majčinog oca)",MGM_F:"Pradjed (otac majčine majke)",MGM_M:"Prababa (majka majčine majke)"},eE={SPOUSE:Q.A,CHILD:ee.A,PARENT:ea.A,PATERNAL_GRANDFATHER:et.A,PATERNAL_GRANDMOTHER:et.A,MATERNAL_GRANDFATHER:et.A,MATERNAL_GRANDMOTHER:et.A,PGF_F:et.A,PGF_M:et.A,PGM_F:et.A,PGM_M:et.A,MGF_F:et.A,MGF_M:et.A,MGM_F:et.A,MGM_M:et.A},eD=e=>{let{relationship:a}=e,t=eE[a]||er.A;return(0,r.jsx)(t,{className:"mr-2 h-4 w-4 text-muted-foreground"})},eP=e=>{let{isAlive:a,acceptsInheritance:t,requestSeparateHalf:n}=e,i=[];return a?t?(i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(ei.A,{className:"ml-2 h-4 w-4 text-green-600 cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Prihvata nasljedstvo"})})]})},"accepts")),n&&i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(es.A,{className:"ml-1 h-4 w-4 text-blue-600 cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Traži izdvajanje polovine"})})]})},"separateHalf"))):i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(eo.A,{className:"ml-2 h-4 w-4 text-destructive cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Ne prihvata nasljedstvo"})})]})},"rejects")):i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(en.A,{className:"ml-2 h-4 w-4 text-muted-foreground cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Preminuo/la"})})]})},"deceased")),(0,r.jsx)(r.Fragment,{children:i})};function eT(e){let{onAddHeir:a,heirs:t,onRemoveHeir:o,deceasedName:l,setDeceasedName:d,setHeirs:c}=e,[m,h]=(0,n.useState)(!1),[j,f]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null),y=(0,i.mN)({resolver:(0,s.u)(eS),defaultValues:{name:"",relationship:void 0,isAlive:!0,acceptsInheritance:!0,requestSeparateHalf:!1}}),R=y.watch("isAlive"),w=y.watch("relationship"),I=y.watch("acceptsInheritance");(0,n.useEffect)(()=>{R||(y.setValue("acceptsInheritance",!1),y.setValue("requestSeparateHalf",!1)),"SPOUSE"!==w&&y.setValue("requestSeparateHalf",!1),"SPOUSE"!==w||I||y.setValue("requestSeparateHalf",!1)},[R,w,I,y]);let M=e=>{o(e)},D=e=>{g(e),f(!0)},P=()=>{g(null),f(!1)},q=e=>"CHILD"===e||"PARENT"===e||"PATERNAL_GRANDFATHER"===e||"PATERNAL_GRANDMOTHER"===e||"MATERNAL_GRANDFATHER"===e||"MATERNAL_GRANDMOTHER"===e,B=(0,n.useCallback)(e=>{let{heir:a,level:n=0}=e,i=eM[a.relationship];if(n>0&&"CHILD"===a.relationship){let e=t.find(e=>{var t;return null===(t=e.descendants)||void 0===t?void 0:t.some(e=>e.id===a.id)})||(n>1?"Prethodni Nasljednik":null);i="object"==typeof e&&e?"PARENT"===e.relationship?"Brat/Sestra (potomak od ".concat(e.name,")"):"CHILD"===e.relationship?"Unuk/Unuka (potomak od ".concat(e.name,")"):e.relationship.includes("GRANDFATHER")||e.relationship.includes("GRANDMOTHER")?"Ujak/Stric/Tetka (potomak od ".concat(e.name,")"):"Potomak (od ".concat(e.name||"pretka",")"):"Potomak"}return(0,r.jsxs)("li",{className:"flex flex-col p-2 rounded-md border ".concat(n>0?"ml-6 mt-1 bg-secondary/60 border-secondary":"bg-card border-border"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-x-1",children:[n>0&&(0,r.jsx)(el.A,{className:"mr-1 h-3 w-3 text-muted-foreground flex-shrink-0"}),(0,r.jsx)(eD,{relationship:a.relationship}),(0,r.jsx)("span",{className:"font-medium",children:a.name}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",i,")"]}),(0,r.jsx)(eP,{isAlive:a.isAlive,acceptsInheritance:a.acceptsInheritance,requestSeparateHalf:a.requestSeparateHalf})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[!a.isAlive&&q(a.relationship)&&(0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>D(a),"aria-label":"Dodaj nasljednika za ".concat(a.name),children:(0,r.jsx)(ed.A,{className:"h-4 w-4 text-primary hover:text-primary/80"})})}),(0,r.jsx)($,{children:(0,r.jsxs)("p",{children:["Dodaj potomka za ",a.name]})})]})}),(0,r.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>M(a.id),"aria-label":"Ukloni ".concat(a.name),children:(0,r.jsx)(ec.A,{className:"h-4 w-4 text-destructive hover:text-destructive/80"})})]})]}),a.descendants&&a.descendants.length>0&&(0,r.jsx)("ul",{className:"mt-2 space-y-1 border-t border-dashed border-muted pt-2",children:a.descendants.map(e=>(0,r.jsx)(B,{heir:e,level:n+1},e.id))})]},a.id)},[M,D,t]);return(0,r.jsxs)("div",{className:"space-y-6 print:hidden",children:[(0,r.jsxs)(z,{className:"border-primary/30 shadow",children:[(0,r.jsx)(H,{className:"bg-primary/5 rounded-t-md",children:(0,r.jsxs)(G,{className:"text-lg flex items-center",children:[(0,r.jsx)(er.A,{className:"mr-2 h-5 w-5 text-primary"})," Podaci o Ostavioocu"]})}),(0,r.jsxs)(U,{className:"pt-4",children:[(0,r.jsx)(p,{placeholder:"Ime i prezime ostavioca",value:l,onChange:e=>d(e.target.value),className:"mb-2","aria-label":"Ime i prezime ostavioca"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unesite ime osobe čije se nasljedstvo dijeli."})]})]}),(0,r.jsxs)(z,{className:"border-primary/30 shadow",children:[(0,r.jsxs)(H,{className:"bg-primary/5 rounded-t-md",children:[(0,r.jsxs)(G,{className:"text-lg flex items-center",children:[(0,r.jsx)(em.A,{className:"mr-2 h-5 w-5 text-primary"})," Nasljednici"]}),(0,r.jsx)(L,{children:"Dodajte sve potencijalne zakonske nasljednike. Za preminule nasljednike koji mogu imati potomke po pravu predstavljanja (djecu, roditelje, djedove/babe), dodajte njihove potomke klikom na ikonu plus. Program provjerava nasljedne redove: 1. Djeca/Supružnik; 2. Roditelji/Supružnik (i potomci roditelja - braća/sestre ostavioca); 3. Djedovi/Babe/Supružnik (i njihovi potomci - ujaci/stricevi/tetke ostavioca); 4. Pradjedovi/Prababe (bez prava predstavljanja za njihove potomke po ovom zakonu)."})]}),(0,r.jsxs)(U,{className:"pt-4",children:[t.length>0&&(0,r.jsx)(V,{className:"h-48 mb-4 border rounded-md p-2 bg-secondary/20",children:(0,r.jsx)("ul",{className:"space-y-2",children:t.map(e=>(0,r.jsx)(B,{heir:e},e.id))})}),!m&&(0,r.jsxs)(u,{onClick:()=>h(!0),variant:"outline",className:"w-full border-primary/50 text-primary hover:bg-primary/10 hover:text-primary",children:[(0,r.jsx)(ed.A,{className:"mr-2 h-4 w-4"})," Dodaj Nasljednika"]}),m&&(0,r.jsx)(S,{...y,children:(0,r.jsxs)("form",{onSubmit:y.handleSubmit(function(e){a({...e,acceptsInheritance:!!e.isAlive&&e.acceptsInheritance,requestSeparateHalf:"SPOUSE"===e.relationship&&!!e.isAlive&&!!e.acceptsInheritance&&e.requestSeparateHalf,id:Date.now().toString(),descendants:[]}),y.reset(),h(!1)}),className:"space-y-4 p-4 border border-dashed border-primary/50 rounded-md bg-secondary/50 mt-4",children:[(0,r.jsx)(E,{control:y.control,name:"name",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(O,{children:"Ime Nasljednika"}),(0,r.jsx)(_,{children:(0,r.jsx)(p,{placeholder:"Npr. Marko Marković",...a,"aria-required":"true"})}),(0,r.jsx)(C,{})]})}}),(0,r.jsx)(E,{control:y.control,name:"relationship",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)(O,{children:"Odnos prema Ostavioocu"})}),(0,r.jsxs)(v,{onValueChange:a.onChange,value:a.value||"",children:[(0,r.jsx)(_,{children:(0,r.jsx)(b,{"aria-required":"true",children:(0,r.jsx)(N,{placeholder:"Izaberite odnos"})})}),(0,r.jsx)(A,{children:Object.entries(eM).map(e=>{let[a,t]=e;return(0,r.jsx)(k,{value:a,children:t},a)})})]}),(0,r.jsx)(C,{})]})}}),(0,r.jsx)(E,{control:y.control,name:"isAlive",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(O,{children:"Da li je nasljednik živ?"}),(0,r.jsx)(F,{children:"Ako nije živ, za određene srodnike moći ćete dodati njihove potomke nakon što sačuvate ovog nasljednika."})]}),(0,r.jsx)(_,{children:(0,r.jsx)(Y,{checked:a.value,onCheckedChange:a.onChange,"aria-label":"Da li je nasljednik živ"})})]})}}),(0,r.jsx)(E,{control:y.control,name:"acceptsInheritance",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-background",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(O,{children:"Da li se prihvata nasljedstva?"}),(0,r.jsx)(F,{children:"Ako se živ nasljednik ne prihvata, njegov dio dijele ostali. Preminuli ne mogu prihvatiti."})]}),(0,r.jsx)(_,{children:(0,r.jsx)(Y,{checked:a.value,onCheckedChange:a.onChange,disabled:!R,"aria-label":"Da li se prihvata nasljedstva"})})]})}}),"SPOUSE"===w&&R&&I&&(0,r.jsx)(E,{control:y.control,name:"requestSeparateHalf",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-blue-50 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsxs)(O,{className:"text-blue-800 dark:text-blue-300 flex items-center",children:[(0,r.jsx)(es.A,{className:"mr-2 h-4 w-4"})," Da li traži izdvajanje polovine?"]}),(0,r.jsx)(F,{className:"text-blue-700 dark:text-blue-400",children:"Ako supružnik ovo zatraži, dobija 1/2 imovine odmah, a ostatak se dijeli zakonski."})]}),(0,r.jsx)(_,{children:(0,r.jsx)(Y,{checked:a.value,onCheckedChange:a.onChange,"aria-label":"Da li supružnik traži izdvajanje polovine"})})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,r.jsx)(u,{type:"button",variant:"ghost",onClick:()=>{h(!1),y.reset()},children:"Odustani"}),(0,r.jsx)(u,{type:"submit",children:"Sačuvaj Nasljednika"})]})]})})]})]}),x&&(0,r.jsx)(ek,{isOpen:j,onClose:P,onAddDescendant:e=>{if(x){let a={...e,relationship:"CHILD",id:Date.now().toString(),acceptsInheritance:!!e.isAlive&&e.acceptsInheritance,requestSeparateHalf:!1,descendants:[]};c(e=>eI(e,x.id,a)),P()}},parentName:x.name})]})}let eO=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,c.cn)("w-full caption-bottom text-sm",t),...n})})});eO.displayName="Table";let e_=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("thead",{ref:a,className:(0,c.cn)("[&_tr]:border-b",t),...n})});e_.displayName="TableHeader";let eF=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,c.cn)("[&_tr:last-child]:border-0",t),...n})});eF.displayName="TableBody",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let eC=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tr",{ref:a,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});eC.displayName="TableRow";let ez=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("th",{ref:a,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});ez.displayName="TableHead";let eH=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("td",{ref:a,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});eH.displayName="TableCell",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("caption",{ref:a,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption";var eG=t(1467),eL=t(4755),eU=t(5938);let eq={SPOUSE:"Supružnik",CHILD:"Dijete",PARENT:"Roditelj",PATERNAL_GRANDFATHER:"Djed (očeva strana)",PATERNAL_GRANDMOTHER:"Baba (očeva strana)",MATERNAL_GRANDFATHER:"Djed (majcina strana)",MATERNAL_GRANDMOTHER:"Baba (majcina strana)",PGF_F:"Pradjed (otac očevog oca)",PGF_M:"Prababa (majka očevog oca)",PGM_F:"Pradjed (otac očeve majke)",PGM_M:"Prababa (majka očeve majke)",MGF_F:"Pradjed (otac majčinog oca)",MGF_M:"Prababa (majka majčinog oca)",MGM_F:"Pradjed (otac majčine majke)",MGM_M:"Prababa (majka majčine majke)"},eV=e=>e?0===e.denominator||isNaN(e.numerator)||isNaN(e.denominator)?"Greška":0===e.numerator?"0":1===e.denominator?e.numerator.toString():"".concat(e.numerator,"/").concat(e.denominator):"0",eB=e=>Object.values(e).some(e=>(null==e?void 0:e.numerator)>0&&(null==e?void 0:e.denominator)>0),eJ=e=>{let{isAlive:a,acceptsInheritance:t,requestSeparateHalf:n}=e,i=[];return a?t?(i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(ei.A,{className:"ml-1 h-4 w-4 text-green-600 inline-block cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Prihvata nasljedstvo"})})]})},"accepts")),n&&i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(es.A,{className:"ml-1 h-4 w-4 text-blue-600 inline-block cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Traži izdvajanje polovine"})})]})},"separateHalf"))):i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(eo.A,{className:"ml-1 h-4 w-4 text-destructive inline-block cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Ne prihvata nasljedstvo"})})]})},"rejects")):i.push((0,r.jsx)(K,{children:(0,r.jsxs)(X,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsx)(en.A,{className:"ml-1 h-4 w-4 text-muted-foreground inline-block cursor-help"})}),(0,r.jsx)($,{children:(0,r.jsx)("p",{children:"Preminuo/la"})})]})},"deceased")),(0,r.jsx)(r.Fragment,{children:i})},eY=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0,r=[];return e.forEach(e=>{r.push({...e,displayLevel:a,parentHeirRelationship:null==t?void 0:t.relationship,parentName:null==t?void 0:t.name}),e.descendants&&e.descendants.length>0&&(r=r.concat(eY(e.descendants,a+1,e)))}),r};function eZ(e){let{results:a,heirs:t,deceasedName:n,donationRules:i}=e,s=eB(a),o=eY(t),l=new Map(eR(t).map(e=>[e.id,e])),d=e=>{let a=[];return e.forEach(e=>{e.isAlive&&e.acceptsInheritance&&a.push(e),e.descendants&&(a=a.concat(d(e.descendants)))}),a},c=d(t).length>0;return(0,r.jsxs)(z,{className:"mt-6 shadow-md border-accent/50 print-section print:mt-0 print:shadow-none print:border-none print:rounded-none",children:[(0,r.jsxs)(H,{className:"bg-accent/5 rounded-t-lg print:border-b print:pb-2 print:mb-4",children:[(0,r.jsxs)(G,{className:"text-xl md:text-2xl font-semibold text-accent flex items-center print:text-lg print:text-black",children:[(0,r.jsx)(eG.A,{className:"mr-2 h-6 w-6 print:hidden"})," Rezultati Nasljedstva za: ",(0,r.jsx)("span",{className:"ml-1 font-bold",children:n})]}),(0,r.jsx)(L,{className:"print:text-sm print:text-gray-600",children:"Prikaz izračunatih nasljednih dijelova svedenih na zajednički imenilac."})]}),(0,r.jsxs)(U,{className:"pt-4 print:p-0",children:[(0,r.jsxs)(eO,{className:"print:text-xs",children:[(0,r.jsx)(e_,{children:(0,r.jsxs)(eC,{className:"bg-secondary/50 print:bg-white",children:[(0,r.jsx)(ez,{className:"print:p-1",children:"Nasljednik"}),(0,r.jsx)(ez,{className:"print:p-1 print:hidden md:table-cell",children:"Status"}),(0,r.jsx)(ez,{className:"print:p-1",children:"Odnos/Veza"}),(0,r.jsx)(ez,{className:"text-right print:p-1",children:"Nasljedni Dio"})]})}),(0,r.jsx)(eF,{children:o.length>0?o.map(e=>{let t=a[e.id]||{numerator:0,denominator:1},n=t.numerator>0,i=eJ({isAlive:e.isAlive,acceptsInheritance:e.acceptsInheritance,requestSeparateHalf:e.requestSeparateHalf}),s=eq[e.relationship];return e.displayLevel>0&&"CHILD"===e.relationship&&(s="CHILD"===e.parentHeirRelationship?"Unuk/a (od ".concat(e.parentName,")"):"PARENT"===e.parentHeirRelationship?"Brat/Sestra (od ".concat(e.parentName,")"):e.parentHeirRelationship&&("PATERNAL_GRANDFATHER"===e.parentHeirRelationship||"PATERNAL_GRANDMOTHER"===e.parentHeirRelationship||"MATERNAL_GRANDFATHER"===e.parentHeirRelationship||"MATERNAL_GRANDMOTHER"===e.parentHeirRelationship)?"Ujak/Stric/Tetka (od ".concat(e.parentName,")"):"Potomak (od ".concat(e.parentName,")")),(0,r.jsxs)(eC,{className:"".concat(n||!e.isAlive||e.acceptsInheritance?"":"text-muted-foreground opacity-60"," hover:bg-secondary/30 print:break-inside-avoid"),children:[(0,r.jsxs)(eH,{className:"font-medium ".concat(n||!e.isAlive&&(e.descendants||[]).some(e=>{var t;return(null===(t=a[e.id])||void 0===t?void 0:t.numerator)>0})?"":"text-muted-foreground"," print:p-1 py-2"),children:[e.displayLevel>0&&(0,r.jsxs)("span",{style:{paddingLeft:"".concat(.75*e.displayLevel,"rem")},className:"inline-flex items-center",children:[(0,r.jsx)(el.A,{className:"mr-1 h-3 w-3 text-muted-foreground print:hidden"}),(0,r.jsx)("span",{className:n?"font-semibold":"",children:e.name})]}),0===e.displayLevel&&(0,r.jsx)("span",{className:n?"font-semibold":"",children:e.name})]}),(0,r.jsx)(eH,{className:"print:hidden md:table-cell py-2",children:i}),(0,r.jsx)(eH,{className:"".concat(n||!e.isAlive&&(e.descendants||[]).some(e=>{var t;return(null===(t=a[e.id])||void 0===t?void 0:t.numerator)>0})?"":"text-muted-foreground opacity-80"," print:p-1 py-2"),children:s}),(0,r.jsxs)(eH,{className:"text-right font-semibold flex items-center justify-end ".concat(n?"text-accent print:text-black":"text-muted-foreground"," print:p-1 py-2"),children:[(0,r.jsx)("span",{className:"tabular-nums",children:eV(t)}),n&&(0,r.jsx)(eL.A,{className:"ml-1 h-4 w-4 opacity-60 print:hidden"})]})]},e.id)}):(0,r.jsx)(eC,{children:(0,r.jsxs)(eH,{colSpan:4,className:"text-center text-muted-foreground py-4 print:p-1",children:[c?"Niko od navedenih nema pravo na nasljedstvo ili se niko nije prihvatio nasljedstva.":"Nema unesenih nasljednika.",!s&&c&&" Imovina može pripasti Republici Srpskoj."]})})})]}),i.length>0&&(0,r.jsxs)("div",{className:"mt-6 p-4 border-t border-dashed print:mt-4 print:break-before-page",children:[(0,r.jsxs)("h4",{className:"text-md font-semibold mb-2 flex items-center text-primary print:text-base print:mb-1",children:[(0,r.jsx)(eU.A,{className:"mr-2 h-4 w-4 print:hidden"})," Prikaz Ustupanja Dijelova"]}),(0,r.jsx)("ul",{className:"space-y-1.5 text-sm list-none print:text-xs",children:i.map(e=>{var a,t;let n=(null===(a=l.get(e.donorId))||void 0===a?void 0:a.name)||"Nepoznat",i=(null===(t=l.get(e.recipientId))||void 0===t?void 0:t.name)||"Nepoznat";return(0,r.jsxs)("li",{className:"print:break-inside-avoid flex items-center gap-1 text-muted-foreground",children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:n}),(0,r.jsx)(eU.A,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),(0,r.jsx)("span",{className:"font-medium text-foreground",children:i}),(0,r.jsxs)("span",{className:"ml-1",children:["(",eV(e.portionOfShare)," cjelokupne zaostavštine)"]})]},e.id)})})]}),(0,r.jsx)("p",{className:"mt-4 px-4 pb-4 text-sm text-muted-foreground text-center italic print:text-xs print:mt-4 print:p-0 print:max-w-full",children:"Ovaj programčić je u testnoj fazi te pruža samo indikativne rezultate nasljeđivanja i ni na koji način ne garantuje tačnost dobijenih podataka. Takođe, on nije namijenjen za složene situacije, nema pojma šta je nužni dio ili šta je nedostojnost nasljeđivanja i sl."})]})]})}var eK=t(1949),eX=t(594);function eW(e,a){return(e=Math.abs(Math.round(e)),a=Math.abs(Math.round(a)),isNaN(e)||isNaN(a))?1:0===a?e:eW(a,e%a)}function e$(e,a){return(e=Math.abs(Math.round(e)),a=Math.abs(Math.round(a)),isNaN(e)||isNaN(a))?1:0===e||0===a?0:Math.abs(e*a)/eW(e,a)}function eQ(e){if(!e||0===e.numerator)return{numerator:0,denominator:1};let a=Math.round(e.numerator),t=Math.round(e.denominator);if(0===t||isNaN(a)||isNaN(t))return console.error("Invalid input in simplifyFraction:",e),{numerator:0,denominator:1};let r=eW(Math.abs(a),Math.abs(t)),n=Math.abs(t/r);return{numerator:a/r*(t<0&&0!==a?-1:1),denominator:n}}function e0(e,a){e||(e={numerator:0,denominator:1}),a||(a={numerator:0,denominator:1});let t=e$(e.denominator,a.denominator);return 0===t||isNaN(t)||0===e.denominator||0===a.denominator?(console.error("Invalid common denominator or input denominator in addFractions",e,a,t),{numerator:0,denominator:1}):eQ({numerator:e.numerator*(t/e.denominator)+a.numerator*(t/a.denominator),denominator:t})}function e1(e,a){e||(e={numerator:0,denominator:1}),a||(a={numerator:0,denominator:1});let t=e$(e.denominator,a.denominator);return 0===t||isNaN(t)||0===e.denominator||0===a.denominator?(console.error("Invalid common denominator or input denominator in subtractFractions",e,a,t),{numerator:0,denominator:1}):eQ({numerator:e.numerator*(t/e.denominator)-a.numerator*(t/a.denominator),denominator:t})}function e4(e,a){return(e||(e={numerator:0,denominator:1}),a||(a={numerator:0,denominator:1}),0===e.denominator||0===a.denominator)?(console.error("Invalid denominator in multiplyFractions",e,a),{numerator:0,denominator:1}):eQ({numerator:e.numerator*a.numerator,denominator:e.denominator*a.denominator})}function e2(e,a){return(e||(e={numerator:0,denominator:1}),0===a||isNaN(a))?(console.error("Division by zero or NaN in divideFractionByNumber",a),{numerator:0,denominator:1}):0===e.denominator?(console.error("Invalid denominator in divideFractionByNumber",e),{numerator:0,denominator:1}):eQ({numerator:e.numerator,denominator:e.denominator*a})}function e5(e,a){if(!e||!a||void 0===e.numerator||void 0===e.denominator||void 0===a.numerator||void 0===a.denominator||0===e.denominator||0===a.denominator)return e&&0===e.numerator&&e.denominator>0&&a&&0===a.numerator&&a.denominator>0?0:e&&0===e.denominator&&a&&0!==a.denominator?1:a&&0===a.denominator&&e&&0!==e.denominator?-1:0;let t=e.numerator*a.denominator,r=a.numerator*e.denominator;return t>r?1:t<r?-1:0}function e3(e){let a=[];return e.forEach(e=>{a.push(e),e.descendants&&(a=a.concat(e3(e.descendants)))}),a}let e9={numerator:0,denominator:1},e8={numerator:1,denominator:2},e6={numerator:1,denominator:1};function e7(e){let a={};return Object.keys(e).forEach(t=>{a[t]=eQ(e[t]||e9)}),a}function ae(e,a,t){let r=(e.descendants||[]).filter(e=>e.isAlive&&e.acceptsInheritance),n=(e.descendants||[]).filter(e=>!e.isAlive&&(e.descendants||[]).length>0&&(e.descendants||[]).some(e=>e.isAlive&&e.acceptsInheritance)),i=r.length+n.length;if(0===i)return;let s=e2(a,i);r.forEach(e=>{t[e.id]=e0(t[e.id]||e9,s)}),n.forEach(e=>{ae(e,s,t)})}let aa=e=>e&&e.isAlive&&e.acceptsInheritance,at=e=>e&&!e.isAlive&&(e.descendants||[]).some(e=>aa(e)||at(e));function ar(e,a,t,r){let n=aa(e)||at(e),i=aa(a)||at(a),s=e2(t,2);n&&i?(aa(e)&&e?r[e.id]=e0(r[e.id]||e9,s):at(e)&&e&&ae(e,s,r),aa(a)&&a?r[a.id]=e0(r[a.id]||e9,s):at(a)&&a&&ae(a,s,r)):n?aa(e)&&e?r[e.id]=e0(r[e.id]||e9,t):at(e)&&e&&ae(e,t,r):i&&(aa(a)&&a?r[a.id]=e0(r[a.id]||e9,t):at(a)&&a&&ae(a,t,r))}function an(e,a,t,r){let n=aa(e),i=aa(a);return n&&i?(e&&(r[e.id]=e0(r[e.id]||e9,e4(t,e8))),a&&(r[a.id]=e0(r[a.id]||e9,e4(t,e8))),!0):n?(e&&(r[e.id]=e0(r[e.id]||e9,t)),!0):!!i&&(a&&(r[a.id]=e0(r[a.id]||e9,t)),!0)}function ai(e,a,t,r,n,i){let s=e4(n,e8),o={},l=an(e,a,s,o),d={},c=an(t,r,s,d);return l&&c?(Object.keys(o).forEach(e=>i[e]=e0(i[e]||e9,o[e])),Object.keys(d).forEach(e=>i[e]=e0(i[e]||e9,d[e])),!0):l&&!c?(an(e,a,n,i),!0):!l&&!!c&&(an(t,r,n,i),!0)}function as(e){let a={},t=e6;e3(e).forEach(e=>{a[e.id]=e9});let r=e.find(e=>"SPOUSE"===e.relationship&&aa(e)&&!0===e.requestSeparateHalf);if(r&&(a[r.id]=e0(a[r.id]||e9,e8),t=e1(t,e8)),t.numerator<=0&&t.denominator>0)return e7(a);let n=e.find(e=>"SPOUSE"===e.relationship&&aa(e)),i=e.filter(e=>"CHILD"===e.relationship&&aa(e)),s=e.filter(e=>"CHILD"===e.relationship&&at(e));if(i.length>0||s.length>0){let e=i.length+s.length;if(n&&e++,e>0){let r=e2(t,e);n&&(a[n.id]=e0(a[n.id]||e9,r)),i.forEach(e=>{a[e.id]=e0(a[e.id]||e9,r)}),s.forEach(e=>{ae(e,r,a)})}return e7(a)}let o=e.filter(e=>"PARENT"===e.relationship),l=o.filter(e=>aa(e)),d=o.filter(e=>at(e));if(n&&0===l.length&&0===d.length)return a[n.id]=e0(a[n.id]||e9,t),e7(a);if(l.length>0||d.length>0){let e=n?e4(t,e8):t;n&&(a[n.id]=e0(a[n.id]||e9,e4(t,e8)));let r=[...l,...d];if(1===r.length){let t=r[0];aa(t)?a[t.id]=e0(a[t.id]||e9,e):at(t)&&ae(t,e,a)}else if(2===r.length){let t=e2(e,2);r.forEach(e=>{aa(e)?a[e.id]=e0(a[e.id]||e9,t):at(e)&&ae(e,t,a)})}else if(2===o.length&&1===l.length&&0===d.length){let t=l[0];a[t.id]=e0(a[t.id]||e9,e)}return e7(a)}let c=e.find(e=>"PATERNAL_GRANDFATHER"===e.relationship),m=e.find(e=>"PATERNAL_GRANDMOTHER"===e.relationship),u=e.find(e=>"MATERNAL_GRANDFATHER"===e.relationship),p=e.find(e=>"MATERNAL_GRANDMOTHER"===e.relationship),h=aa(c)||at(c)||aa(m)||at(m),j=aa(u)||at(u)||aa(p)||at(p);if(n&&!h&&!j)return a[n.id]=e0(a[n.id]||e9,t),e7(a);if(h||j){let e=n?e4(t,e8):t;if(n&&(a[n.id]=e0(a[n.id]||e9,e4(t,e8))),h&&j){let t=e4(e,e8);ar(c,m,t,a),ar(u,p,t,a)}else h?ar(c,m,e,a):j&&ar(u,p,e,a);return e7(a)}let f=e.find(e=>"PGF_F"===e.relationship),x=e.find(e=>"PGF_M"===e.relationship),v=e.find(e=>"PGM_F"===e.relationship),N=e.find(e=>"PGM_M"===e.relationship),b=e.find(e=>"MGF_F"===e.relationship),g=e.find(e=>"MGF_M"===e.relationship),y=e.find(e=>"MGM_F"===e.relationship),A=e.find(e=>"MGM_M"===e.relationship),k=ai(f,x,v,N,e6,{}),R=ai(b,g,y,A,e6,{});if(n&&!k&&!R)return a[n.id]=e0(a[n.id]||e9,t),e7(a);if(k||R){let e=n?e4(t,e8):t;n&&(a[n.id]=e0(a[n.id]||e9,e4(t,e8)));let r=ai(f,x,v,N,k&&R?e4(e,e8):e,a);ai(b,g,y,A,k&&R?e4(e,e8):r?e9:e,a),k&&!R?(f&&a[f.id]&&(a[f.id]=e9),x&&a[x.id]&&(a[x.id]=e9),v&&a[v.id]&&(a[v.id]=e9),N&&a[N.id]&&(a[N.id]=e9),ai(f,x,v,N,e,a)):!k&&R&&(b&&a[b.id]&&(a[b.id]=e9),g&&a[g.id]&&(a[g.id]=e9),y&&a[y.id]&&(a[y.id]=e9),A&&a[A.id]&&(a[A.id]=e9),ai(b,g,y,A,e,a))}return e7(a)}let ao=o.Yj().regex(/^\s*\d+\s*\/\s*\d+\s*$/,{message:"Format: 'brojilac / imenilac' (npr. '1 / 2')"}).transform((e,a)=>{let t=e.split("/").map(e=>e.trim()),r=parseInt(t[0],10),n=parseInt(t[1],10);return isNaN(r)||isNaN(n)||n<=0||r<0?(a.addIssue({code:o.eq.custom,message:"Neispravan razlomak. Brojilac mora biti >= 0, imenilac > 0."}),o.tm):r>n?(a.addIssue({code:o.eq.custom,message:"Brojilac ne može biti veći od imenioca za ovaj unos."}),o.tm):{numerator:r,denominator:n}}),al=o.Ik({donorId:o.Yj().min(1,{message:"Molimo izaberite donatora."}),recipientId:o.Yj().min(1,{message:"Molimo izaberite primaoca."}),portionOfShare:ao}).refine(e=>e.donorId!==e.recipientId,{message:"Donator i primalac ne mogu biti ista osoba.",path:["recipientId"]}),ad={numerator:1,denominator:1},ac={numerator:0,denominator:1},am=(e,a)=>{var t;return(null===(t=e.find(e=>e.id===a))||void 0===t?void 0:t.name)||"Nepoznat"},au=e=>{if(!e||void 0===e.numerator||void 0===e.denominator)return"0/1";let a=eQ(e);return 0===a.denominator?"N/A":0===a.numerator?"0":1===a.denominator&&0!==a.numerator?a.numerator.toString():"".concat(a.numerator,"/").concat(a.denominator)};function ap(e){var a,t,o;let{eligibleHeirs:l,donationRules:d,setDonationRules:c,initialShares:m}=e,[h,j]=(0,n.useState)(!1),[f,x]=(0,n.useState)(null),g=(0,i.mN)({resolver:(0,s.u)(al),defaultValues:{donorId:"",recipientId:"",portionOfShare:"0 / 1"},mode:"onChange"}),{setError:y,clearErrors:R,formState:{errors:w},watch:I,setValue:M}=g,D=I("donorId"),P=I("portionOfShare");(0,n.useEffect)(()=>{if(D&&m){let e=m[D]||ac,a=ac;d.forEach(e=>{e.donorId===D&&(a=e0(a,e.portionOfShare))});let t=e1(ad,a=eQ(a));x({initialAbsoluteShare:eQ(e),totalRelativePortionAllocatedByDonor:a,maxRelativePortionForNewRule:eQ(t.numerator<0?ac:t),isFullyAllocated:e5(a,ad)>=0})}else x(null)},[D,m,d]),(0,n.useEffect)(()=>{var e,a;if((null===(e=w.portionOfShare)||void 0===e?void 0:e.type)==="invalid_string"||(null===(a=w.portionOfShare)||void 0===a?void 0:a.type)==="custom")return;R("portionOfShare");let t=ao.safeParse(P);if(!t.success)return;let r=t.data;if(f){let e=f.maxRelativePortionForNewRule;f.isFullyAllocated&&r.numerator>0?y("portionOfShare",{type:"manual_fully_allocated",message:"Donator je već alocirao 100% svog dijela. Unesite '0 / 1' ili izmijenite postojeća pravila."}):e5(r,e)>0&&y("portionOfShare",{type:"manual_exceeds_remaining_share",message:"Ne možete dodijeliti više od preostalog dijela donatora (".concat(au(e)," njegovog početnog udjela).")})}},[P,f,w.portionOfShare,ao,y,R]);let q=e=>{c(a=>a.filter(a=>a.id!==e))},B=null!==(o=null==f?void 0:f.isFullyAllocated)&&void 0!==o&&o;return(0,r.jsxs)(z,{className:"mt-6 border-primary/30 shadow",children:[(0,r.jsxs)(H,{className:"bg-primary/5 rounded-t-md",children:[(0,r.jsxs)(G,{className:"text-lg flex items-center",children:[(0,r.jsx)(eU.A,{className:"mr-2 h-5 w-5 text-primary"})," Preraspodjela Nasljednih Dijelova (Opciono)"]}),(0,r.jsx)(L,{children:"Definišite kako nasljednici ustupaju svoje dijelove drugim nasljednicima. Ustupiti mogu samo živi nasljednici koji prihvataju nasljedstvo. Ako donator odluči da ustupi dio svog nasljedstva, **mora ustupiti cjelokupan svoj nasljedni dio** jednom ili više primalaca. Unesite dio **početnog udjela DONATORA** koji se ustupa svakom primaocu (npr. '1/2' ako donator ustupa polovinu svog dijela tom primaocu). Zbir svih ustupljenih dijelova od strane jednog donatora mora biti tačno 100% (ili 1/1) njegovog početnog udjela da bi ustupanje bilo važeće."})]}),(0,r.jsxs)(U,{className:"pt-4",children:[d.length>0&&(0,r.jsx)(V,{className:"h-36 mb-4 border rounded-md p-2 bg-secondary/20",children:(0,r.jsx)("ul",{className:"space-y-2",children:d.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between p-2 rounded-md bg-card border border-border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm flex-wrap gap-x-1",children:[(0,r.jsx)("span",{className:"font-medium",children:am(l,e.donorId)}),(0,r.jsx)(eU.A,{className:"h-3 w-3 text-muted-foreground"}),(0,r.jsx)("span",{className:"font-medium",children:am(l,e.recipientId)}),(0,r.jsxs)("span",{className:"text-muted-foreground ml-1 whitespace-nowrap",children:["(",au(e.portionOfShare)," ",(0,r.jsx)("span",{className:"italic text-xs",children:"donatorovog dijela"}),")"]})]}),(0,r.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>q(e.id),"aria-label":"Ukloni pravilo ".concat(e.id),children:(0,r.jsx)(ec.A,{className:"h-4 w-4 text-destructive hover:text-destructive/80"})})]},e.id))})}),!h&&(0,r.jsxs)(u,{onClick:()=>{j(!0),g.reset({donorId:"",recipientId:"",portionOfShare:"0 / 1"}),x(null)},variant:"outline",className:"w-full border-primary/50 text-primary hover:bg-primary/10 hover:text-primary",children:[(0,r.jsx)(ed.A,{className:"mr-2 h-4 w-4"})," Dodaj Pravilo Preraspodjele"]}),h&&(0,r.jsx)(S,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(function(e){let a={id:Date.now().toString(),donorId:e.donorId,recipientId:e.recipientId,portionOfShare:e.portionOfShare};c(e=>[...e,a]),g.reset({donorId:D,recipientId:"",portionOfShare:"0 / 1"})}),className:"space-y-4 p-4 border border-dashed border-primary/50 rounded-md bg-secondary/50 mt-4",children:[(0,r.jsx)(E,{control:g.control,name:"donorId",render:e=>{let{field:a}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(O,{children:"Donator (Ko ustupa dio)"}),(0,r.jsxs)(v,{onValueChange:e=>{a.onChange(e),M("portionOfShare","0 / 1"),R("portionOfShare")},value:a.value||"",children:[(0,r.jsx)(_,{children:(0,r.jsx)(b,{"aria-required":"true",children:(0,r.jsx)(N,{placeholder:"Izaberite donatora"})})}),(0,r.jsx)(A,{children:l.map(e=>{var a,t;return(0,r.jsxs)(k,{value:e.id,disabled:!m||(null===(a=m[e.id])||void 0===a?void 0:a.numerator)===0,children:[e.name," ",m&&(null===(t=m[e.id])||void 0===t?void 0:t.numerator)!==0?"(".concat(au(m?m[e.id]:ac)," ukupno)"):"(nema udjela)"]},e.id)})})]}),(0,r.jsx)(C,{})]})}}),f&&D&&m&&(null===(a=m[D])||void 0===a?void 0:a.numerator)!==0&&(0,r.jsxs)(z,{className:"p-3 text-sm border ".concat(f.isFullyAllocated&&0!==e5(f.totalRelativePortionAllocatedByDonor,ad)?"bg-red-50 dark:bg-red-900/30 border-red-300 dark:border-red-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),children:[(0,r.jsx)(H,{className:"p-0 mb-2",children:(0,r.jsxs)(G,{className:"text-base flex items-center ".concat(f.isFullyAllocated&&0!==e5(f.totalRelativePortionAllocatedByDonor,ad)?"text-red-700 dark:text-red-300":"text-blue-700 dark:text-blue-300"),children:[f.isFullyAllocated&&0!==e5(f.totalRelativePortionAllocatedByDonor,ad)?(0,r.jsx)(eK.A,{size:16,className:"mr-2"}):(0,r.jsx)(eX.A,{size:16,className:"mr-2"}),"Status alokacije za: ",am(l,D)]})}),(0,r.jsxs)(U,{className:"p-0 space-y-1 ".concat(f.isFullyAllocated&&0!==e5(f.totalRelativePortionAllocatedByDonor,ad)?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"),children:[(0,r.jsxs)("p",{children:["Početni udio donatora: ",(0,r.jsx)("span",{className:"font-semibold",children:au(f.initialAbsoluteShare)})," ",(0,r.jsx)("span",{className:"italic text-xs",children:"cjelokupne zaostavštine."})]}),(0,r.jsxs)("p",{children:["Do sada alocirano (drugim pravilima): ",(0,r.jsx)("span",{className:"font-semibold",children:au(f.totalRelativePortionAllocatedByDonor)})," ",(0,r.jsx)("span",{className:"italic text-xs",children:"donatorovog početnog udjela."})]}),f.isFullyAllocated?0===e5(f.totalRelativePortionAllocatedByDonor,ad)?(0,r.jsx)("p",{className:"font-semibold text-green-700 dark:text-green-400",children:"Donator je alocirao 100% svog dijela."}):(0,r.jsxs)("p",{className:"font-semibold",children:["Donator NIJE ISPRAVNO alocirao 100% svog dijela (trenutno: ",au(f.totalRelativePortionAllocatedByDonor),"). Njegove donacije neće biti važeće."]}):(0,r.jsxs)("p",{children:["Preostalo za alokaciju: ",(0,r.jsx)("span",{className:"font-semibold",children:au(f.maxRelativePortionForNewRule)})," ",(0,r.jsx)("span",{className:"italic text-xs",children:"donatorovog početnog udjela."})]}),0!==e5(f.totalRelativePortionAllocatedByDonor,ad)&&(0,r.jsx)("p",{className:"text-amber-700 dark:text-amber-500 font-medium",children:"UPOZORENJE: Da bi ustupanje bilo važeće, zbir svih ustupljenih dijelova ovog donatora mora biti tačno 100% (1/1) njegovog početnog udjela."})]})]}),(0,r.jsx)(E,{control:g.control,name:"recipientId",render:e=>{var a;let{field:t}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(O,{children:"Primalac (Kome se ustupa dio)"}),(0,r.jsxs)(v,{onValueChange:t.onChange,value:t.value||"",disabled:!D||m&&(null===(a=m[D])||void 0===a?void 0:a.numerator)===0,children:[(0,r.jsx)(_,{children:(0,r.jsx)(b,{"aria-required":"true",children:(0,r.jsx)(N,{placeholder:"Izaberite primaoca"})})}),(0,r.jsx)(A,{children:l.filter(e=>e.id!==g.watch("donorId")).map(e=>(0,r.jsx)(k,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(C,{})]})}}),(0,r.jsx)(E,{control:g.control,name:"portionOfShare",render:e=>{var a;let{field:{onChange:t,value:n,...i}}=e,s="object"==typeof n?"".concat(n.numerator," / ").concat(n.denominator):n;return(0,r.jsxs)(T,{children:[(0,r.jsxs)(O,{className:"flex items-center",children:["Dio Donatorovog Udjela Koji Se Ustupa ",(0,r.jsx)(eL.A,{className:"ml-1 h-3 w-3 opacity-70"})]}),(0,r.jsx)(_,{children:(0,r.jsx)(p,{placeholder:"Npr. 1 / 2 (za polovinu DJELA DONATORA)",value:s,onChange:e=>t(e.target.value),"aria-required":"true",...i,disabled:B&&"0 / 1"!==s||!D||m&&(null===(a=m[D])||void 0===a?void 0:a.numerator)===0})}),(0,r.jsx)(F,{children:"Unesite dio **početnog udjela donatora** koji se ustupa ovom primaocu (npr. '1/2' ako donator ustupa polovinu svog dijela). Ako je donator već alocirao 100% svog dijela, možete unijeti samo '0 / 1'."}),(0,r.jsx)(C,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,r.jsx)(u,{type:"button",variant:"ghost",onClick:()=>{j(!1),g.reset({donorId:"",recipientId:"",portionOfShare:"0 / 1"}),x(null),R()},children:"Zatvori Formu"}),(0,r.jsx)(u,{type:"submit",disabled:!g.formState.isValid||!D||m&&(null===(t=m[D])||void 0===t?void 0:t.numerator)===0,children:"Sačuvaj Pravilo"})]})]})})]})]})}var ah=t(7481),aj=t(9876),af=t(7649);let ax=af.bL,av=af.l9,aN=af.ZL,ab=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(af.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:a})});ab.displayName=af.hJ.displayName;let ag=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsxs)(aN,{children:[(0,r.jsx)(ab,{}),(0,r.jsx)(af.UC,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]})});ag.displayName=af.UC.displayName;let ay=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};ay.displayName="AlertDialogHeader";let aA=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};aA.displayName="AlertDialogFooter";let ak=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(af.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold",t),...n})});ak.displayName=af.hE.displayName;let aR=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(af.VY,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});aR.displayName=af.VY.displayName;let aw=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(af.rc,{ref:a,className:(0,c.cn)(m(),t),...n})});aw.displayName=af.rc.displayName;let aI=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(af.ZD,{ref:a,className:(0,c.cn)(m({variant:"outline"}),"mt-2 sm:mt-0",t),...n})});function aS(){let[e,a]=(0,n.useState)(""),[t,i]=(0,n.useState)([]),[s,o]=(0,n.useState)(null),[l,d]=(0,n.useState)([]),{toast:c}=(0,ah.dj)(),m=(0,n.useCallback)(()=>eR(t).filter(e=>e.isAlive&&e.acceptsInheritance),[t]),p=(0,n.useCallback)(()=>{if(t.length>0&&e.trim())try{return as(t)}catch(e){console.error("Error calculating initial shares for form:",e)}return null},[t,e]);(0,n.useEffect)(()=>{o(null)},[t,e]);let h=m(),j=p();return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/30 dark:from-background dark:to-secondary/10 flex flex-col items-center p-4 md:p-8 print:p-0 print:bg-white",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl space-y-8 print:space-y-0",children:[(0,r.jsxs)("header",{className:"print:hidden",children:[(0,r.jsxs)("div",{className:"flex justify-center items-center mb-1",children:[(0,r.jsx)(aj.A,{className:"mr-2 h-6 w-6 md:h-8 md:w-8 text-primary"}),(0,r.jsx)("span",{className:"text-lg md:text-xl font-semibold text-primary",children:"Osnovni sud u Foči"})]}),(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-primary tracking-tight text-center mb-2",children:"Kalkulator nasljedstva"}),(0,r.jsx)("p",{className:"mt-2 text-md md:text-lg text-muted-foreground text-center",children:"Unesite podatke za izračunavanje zakonskih nasljednih dijelova u Republici Srpskoj."})]}),(0,r.jsx)(eT,{onAddHeir:e=>{i(a=>[...a,e]),o(null)},heirs:t,onRemoveHeir:e=>{i(a=>ew(a,e)),o(null),d(a=>a.filter(a=>a.donorId!==e&&a.recipientId!==e))},deceasedName:e,setDeceasedName:a,setHeirs:i}),t.length>0&&h.length>0&&j&&Object.keys(j).length>0&&(0,r.jsx)(ap,{eligibleHeirs:h.filter(e=>j[e.id]&&j[e.id].numerator>0),donationRules:l,setDonationRules:d,initialShares:j}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 print:hidden",children:[(0,r.jsx)(u,{onClick:()=>{if(!e.trim()){c({title:"Greška",description:"Molimo unesite ime ostavioca.",variant:"destructive"});return}if(0===t.length){c({title:"Informacija",description:"Nema unesenih nasljednika za obračun.",variant:"default"}),o({});return}try{let e=as(t),{finalShares:a,warnings:r}=function(e,a,t){var r,n;let i={...e},s=[],o=new Map(e3(t).map(e=>[e.id,e])),l={};for(let t of a)e[t.donorId]&&0!==e[t.donorId].numerator&&(l[t.donorId]||(l[t.donorId]={totalRelativeAllocated:e9,isValid:!1}),l[t.donorId].totalRelativeAllocated=e0(l[t.donorId].totalRelativeAllocated,t.portionOfShare));for(let e in l){let a=l[e];if(a.totalRelativeAllocated=eQ(a.totalRelativeAllocated),0===e5(a.totalRelativeAllocated,e6))a.isValid=!0;else{a.isValid=!1;let t=(null===(r=o.get(e))||void 0===r?void 0:r.name)||"Donator ID: ".concat(e);s.push({type:"donor_incomplete_allocation",donorName:t,message:"".concat(t," nije preraspodijelio/la tačno 100% svog dijela (alocirano: ").concat(function(e){if(!e)return"N/A";let a=eQ(e);return"".concat(a.numerator,"/").concat(a.denominator)}(a.totalRelativeAllocated),"). Njegove/njene donacije neće biti primijenjene.")})}}for(let t of a){let a=t.donorId,r=t.recipientId;if((null===(n=l[a])||void 0===n?void 0:n.isValid)&&e[a]&&e[a].numerator>0){let n=e[a];i[a]!==e9&&0===e5(i[a],n)&&(i[a]=e9);let s=e4(n,t.portionOfShare);i[r]=e0(i[r]||e9,s)}}for(let e in i)i[e]=eQ(i[e]);return{finalShares:i,warnings:s}}(e,l,t),n=function(e){let a={},t={},r=Object.keys(e);r.forEach(a=>{t[a]=eQ(e[a]||e9)});let n=Object.values(t).map(e=>null==e?void 0:e.denominator).filter(e=>"number"==typeof e&&e>0);if(0===n.length)return r.forEach(e=>{a[e]=t[e]||e9}),a;let i=function(e){if(!e||0===e.length)return 1;let a=e.filter(e=>"number"==typeof e&&!isNaN(e)&&e>0);return 0===a.length?1:a.reduce((e,a)=>e$(e,a),1)}(n);return i<=0||isNaN(i)?(console.error("Invalid common denominator calculated:",i,"Denominators:",n),r.forEach(e=>{a[e]=t[e]||e9})):r.forEach(e=>{let r=t[e];if(!r||"number"!=typeof r.numerator||"number"!=typeof r.denominator||isNaN(r.numerator)||isNaN(r.denominator)||r.denominator<=0||0===r.numerator){a[e]={numerator:0,denominator:i};return}let n=i/r.denominator;!Number.isFinite(n)||isNaN(n)?(console.error("Invalid multiplier for heir ".concat(e,". Orig (simplified): ").concat(r.numerator,"/").concat(r.denominator,", Common Den: ").concat(i,", Multiplier: ").concat(n)),a[e]={numerator:0,denominator:i}):a[e]={numerator:Math.round(r.numerator*n),denominator:i}}),a}(a);o(n),r.forEach(e=>{c({title:"Upozorenje o Preraspodjeli",description:e.message,variant:"default",duration:7e3})}),c({title:"Obračun Završen",description:"Nasljedni dijelovi su izračunati.",variant:"default"})}catch(e){console.error("Greška pri obračunu:",e),c({title:"Greška u Obračunu",description:e instanceof Error?e.message:"Došlo je do nepoznate greške.",variant:"destructive"}),o(null)}},size:"lg",className:"w-full sm:w-auto bg-primary hover:bg-primary/90 text-primary-foreground shadow-md transition-transform hover:scale-105",disabled:!e.trim(),children:"Izračunaj Nasljedstvo"}),(0,r.jsxs)(ax,{children:[(0,r.jsx)(av,{asChild:!0,children:(0,r.jsx)(u,{variant:"destructive",size:"lg",className:"w-full sm:w-auto shadow-md transition-transform hover:scale-105",children:"Resetuj Sve Podatke"})}),(0,r.jsxs)(ag,{children:[(0,r.jsxs)(ay,{children:[(0,r.jsx)(ak,{children:"Da li ste sigurni?"}),(0,r.jsx)(aR,{children:"Ova akcija će nepovratno obrisati sve unesene podatke o ostaviocu, nasljednicima i pravilima preraspodjele."})]}),(0,r.jsxs)(aA,{children:[(0,r.jsx)(aI,{children:"Odustani"}),(0,r.jsx)(aw,{onClick:()=>{a(""),i([]),o(null),d([]),c({title:"Resetovano",description:"Svi podaci su obrisani.",variant:"default"})},className:"bg-destructive hover:bg-destructive/90",children:"Obriši Sve"})]})]})]})]}),s&&(0,r.jsx)(eZ,{results:s,heirs:t,deceasedName:e,donationRules:l}),(0,r.jsx)("footer",{className:"text-center mt-12 py-6 border-t border-border/50 print:hidden",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Napravljeno sa ljubavlju za kolege Osnovnog suda u Foči. E-mail za sugestije: dragan.osfoca@gmail.com."})})]})})}aI.displayName=af.ZD.displayName},7481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var r=t(2115);let n=0,i=new Map,s=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},o=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?s(t):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function m(e){let{...a}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=r.useState(d);return r.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var r=t(2596),n=t(9688);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.QP)((0,r.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[774,623,441,684,358],()=>a(2751)),_N_E=e.O()}]);